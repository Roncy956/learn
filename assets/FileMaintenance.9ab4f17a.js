import{_ as M,r as l,o as B,a,b as S,l as w,e as o,w as _,E as n,f as t,h as y,v as b,t as i,g as k,n as E}from"./index.cf62a217.js";import{e as C,f as N}from"./admin.32e416f4.js";const T={class:"page-container"},V={class:"card-header"},z={class:"delete-icon-container"},D={class:"middle-container"},I={class:"storage-section"},G={class:"storage-info-container"},K={class:"storage-value"},P={class:"progress-bar"},R={class:"storage-details"},$={class:"info-section"},j={class:"info-item"},q={class:"info-icon-container"},A={class:"info-text"},H={class:"info-title"},J={class:"delete-button-container"},L={__name:"FileMaintenance",setup(O){const u=e=>{if(!e||e<=0)return"\u2014";const s=1024,d=["B","KB","MB","GB"],c=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,c)).toFixed(2))+" "+d[c]},p=l(0),r=l(0),f=l(0),g=l(0),v=async()=>{try{const e=await C();e.code&&(p.value=e.data.totalFiles,f.value=e.data.totalStorage,g.value=e.data.usedStorage,r.value=parseFloat((e.data.usedStorage/e.data.totalStorage*100).toFixed(2)))}catch(e){n.error(e.message||"\u83B7\u53D6\u4FE1\u606F\u5931\u8D25")}},m=async()=>{try{await E.confirm("\u662F\u5426\u8981\u5220\u9664\u5197\u4F59\u6587\u4EF6\uFF1F","\u786E\u8BA4\u5220\u9664",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"});const e=await N();e.code?(v(),e.data!==0?n.success(`\u6210\u529F\u5220\u9664\uFF01\u5171\u5220\u9664\u4E86 ${e.data} \u4E2A\u6587\u4EF6`):n.warning("\u6CA1\u6709\u5197\u4F59\u6587\u4EF6")):n.error(e.msg||"\u5220\u9664\u5931\u8D25")}catch(e){e!=="cancel"&&n.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}};return B(()=>{v()}),(e,s)=>{const d=a("el-progress"),c=a("Files"),h=a("el-icon"),x=a("el-button"),F=a("el-card");return S(),w("div",T,[o(F,{class:"main-card rounded-card"},{default:_(()=>[t("div",V,[t("div",z,[o(y(b),{class:"delete-icon"})]),s[0]||(s[0]=t("div",{class:"header-content"},[t("h2",null,"\u7CFB\u7EDF\u6587\u4EF6\u7EF4\u62A4"),t("p",null,"\u91CA\u653E\u5B58\u50A8\u7A7A\u95F4\uFF0C\u4F18\u5316\u7CFB\u7EDF\u6027\u80FD")],-1))]),t("div",D,[t("div",I,[t("div",G,[s[1]||(s[1]=t("span",{class:"storage-label"},"\u5B58\u50A8\u4F7F\u7528\u60C5\u51B5",-1)),t("span",K,i(r.value)+"%",1)]),t("div",P,[o(d,{percentage:r.value,"show-text":!1,color:"#06996b"},null,8,["percentage"])]),t("div",R,[t("span",null,i(u(g.value))+"/"+i(u(f.value)),1)])]),t("div",$,[t("div",j,[t("div",q,[o(h,{class:"info-icon"},{default:_(()=>[o(c)]),_:1})]),t("div",A,[t("div",H,[t("span",null,i(p.value),1)]),s[2]||(s[2]=t("div",{class:"info-desc"},"\u73B0\u6709\u6587\u4EF6\u6570",-1))])])])]),t("div",J,[o(x,{class:"delete-button",type:"primary",onClick:m},{default:_(()=>[...s[3]||(s[3]=[k(" \u5220\u9664\u5197\u4F59\u6587\u4EF6 ",-1)])]),_:1})])]),_:1})])}}},W=M(L,[["__scopeId","data-v-5d190442"]]);export{W as default};
